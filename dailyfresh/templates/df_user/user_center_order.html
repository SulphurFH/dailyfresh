{% extends 'df_user/base.html' %}
{% block head %}
<script>
 $(function(){
   $('.col04').each(function(){
     num = parseInt($(this).prev().text());
     price = parseFloat($(this).prev().prev().find('span').text());
     total = num*price;
     $(this).text(total.toFixed(2)+'元');
   })
 })
</script>
{% endblock head %}
{% block right_content %}
<div class="right_content clearfix">
  <h3 class="common_title2">全部订单</h3>
  {% for orderinfo in orderinfos %}
  <ul class="order_list_th w978 clearfix">
    <li class="col01">{{orderinfo.odate}}</li>
    <li class="col02">订单号：{{orderinfo.oid}}</li>
    {% if orderinfo.isPlay  %}
    <li class="col02 stress">已支付</li>
    {% else %}
    <li class="col02 stress">未支付</li>
    {% endif %}
  </ul>
  <table class="order_list_table w980">
    <tbody>
      <tr>
	<td width="55%">
          {% for item in orderinfo.orderdetailinfo_set.all %}
	  <ul class="order_goods_list clearfix">					
	    <li class="col01"><img src="/static/{{item.goods.gpic}}"></li>
	    <li class="col02">{{item.goods.gtitle}}<em><span>{{item.price}}</span>元/{{item.goods.gunit}}</em></li>	
	    <li class="col03">{{item.count}}</li>
	    <li class="col04"></li>	
	  </ul>
          {% endfor %}
	</td>
	<td width="15%">{{orderinfo.ototal}}元</td>
        {% if orderinfo.isPlay  %}
	<td width="15%">已付款</td>
        <td width="15%"><a href="#" class="oper_btn">查看物流</a></td>
        {% else %}
        <td width="15%">未付款</td>
        <td width="15%"><a href="#" class="oper_btn">去付款</a></td>
        {% endif %}
      </tr>
    </tbody>
  </table>
  {% endfor %}

  <div class="pagenation">
    <a href="#"><上一页</a>
      <a href="#" class="active">1</a>
      <a href="#">2</a>
      <a href="#">3</a>
      <a href="#">4</a>
      <a href="#">5</a>
      <a href="#">下一页></a>
  </div>
</div>
{% endblock right_content %}
